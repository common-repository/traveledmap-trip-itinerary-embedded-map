!function(e){function t(l){if(n[l])return n[l].exports;var r=n[l]={i:l,l:!1,exports:{}};return e[l].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,l){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:l})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t){},function(e,t){},function(e,t){e.exports=wp.components},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(4),n(6)},function(e,t,n){"use strict";function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),a=(n.n(r),n(1)),o=(n.n(a),n(2)),i=(n.n(o),n(5)),__=wp.i18n.__,s=wp.blocks.registerBlockType,p=wp.element.Fragment;s("traveledmap/embedded-trip-block",{title:__("Embedded Trip"),icon:"location-alt",category:"traveledmap",keywords:[__("Embedded Map"),__("TraveledMap"),__("Traveled Map"),__("Embedded"),__("Embed")],attributes:{userId:{type:"string",source:"meta",meta:"traveledmap_user_id"},tripId:{type:"string",source:"meta",meta:"traveledmap_trip_id"},baseUrl:{type:"string",source:"meta",meta:"traveledmap_trip_base_url"},mapUrl:{type:"string"},showPopup:{type:"boolean",default:!0},showPictures:{type:"boolean",default:!0},showPicturesAtStart:{type:"boolean",default:!1},isSticky:{type:"boolean",default:!0},showOnPhones:{type:"boolean",default:!0},showOnTablets:{type:"boolean",default:!0},showOnLargeScreens:{type:"boolean",default:!0},mapHeight:{type:"string",default:"50%"},standardMapHeight:{type:"string",default:"30%"},extendedMapHeight:{type:"string",default:"60%"},marginTop:{type:"number",default:0}},edit:function(e){var t=e.attributes,n=t.baseUrl,r=t.userId,a=t.tripId,s=t.showPopup,c=t.showPictures,u=t.showPicturesAtStart,m=t.mapUrl,h=t.isSticky,d=t.showOnPhones,w=t.showOnTablets,b=t.showOnLargeScreens,g=t.mapHeight,f=t.standardMapHeight,y=t.extendedMapHeight,v=t.marginTop,E=e.setAttributes,P=function(e){return function(t){E(l({},e,t))}},S=function(){E({mapUrl:Object(i.a)(n,s,c,u)})},T=function(e){return!(e&&(!Array.isArray(e)||Array.isArray(e)&&e[0]))};return wp.element.createElement("div",{className:"traveledmap-trip-edit-block"},wp.element.createElement("div",null,wp.element.createElement(o.Panel,{header:"Map settings"},wp.element.createElement(o.PanelBody,{title:"Map content",icon:"admin-site-alt",initialOpen:!0},wp.element.createElement(o.PanelRow,null,wp.element.createElement("p",{className:"mb-0 note"},wp.element.createElement("strong",null,"User id:"),"\xa0",function(){return T(r)?null:r}()||"You need to fill the user id you want to use in the editor's sidebar, save the post and then reload"),wp.element.createElement("p",{className:"note"},wp.element.createElement("strong",null,"Trip id:"),"\xa0",function(){return T(a)?null:a}()||"You need to fill the trip id you want to use in the editor's sidebar, save the post and then reload")),wp.element.createElement(o.PanelRow,null,wp.element.createElement(o.ToggleControl,{label:"Show on phones",help:d?"The map will be shown on mobile (< 576px)":"The map will be hidden on mobile devices",checked:d,onChange:function(){return E({showOnPhones:!d})}}),wp.element.createElement(o.ToggleControl,{label:"Show on tablets",help:w?"The map will be shown on tablets (> 576px and < 768px)":"The map will be hidden on tablets devices",checked:w,onChange:function(){return E({showOnTablets:!w})}}),wp.element.createElement(o.ToggleControl,{label:"Show on larger screens",help:b?"The map will be shown on larger screens (> 768px)":"The map will be hidden on larger devices",checked:b,onChange:function(){return E({showOnLargeScreens:!b})}})),wp.element.createElement(o.PanelRow,null,wp.element.createElement(o.ToggleControl,{label:"Show steps name",help:s?"Popup with step name will be shown":"Popup will be show only if mouse is over the step marker",checked:s,onChange:function(){return E({showPopup:!s})}})),wp.element.createElement(o.PanelRow,null,wp.element.createElement(o.ToggleControl,{label:"Show pictures",help:c?"Pictures panel will be open":"Pictures will be hidden",checked:c,onChange:function(){return E({showPictures:!c})}})),wp.element.createElement(o.PanelRow,null,c&&wp.element.createElement(o.ToggleControl,{label:"Show overview pictures",help:u?"Your trip overview has pictures that will be shown":"The overview pictures will be hidden",checked:u,onChange:function(){return E({showPicturesAtStart:!u})}})),wp.element.createElement(o.PanelRow,null,wp.element.createElement(o.Button,{isPrimary:!0,onClick:S,className:"ml-auto"},"Validate"))),wp.element.createElement(o.PanelBody,{title:"Map settings",icon:"admin-settings",initialOpen:!0},wp.element.createElement(o.PanelRow,null,wp.element.createElement(o.TextControl,{label:"Map height (when it's not sticky)",value:g,onChange:P("mapHeight"),help:"Height can be written in pixels (px) or percents of the screen's height (%). i.e: 200px or 50%",className:"input-100"})),wp.element.createElement(o.PanelRow,null,wp.element.createElement(o.ToggleControl,{label:"Map is sticky",help:h?"The map will be visible on top of the screen while scrolling":"The map will be fixed and won't move",checked:h,onChange:function(){return E({isSticky:!h})},className:"mt-5"})),h&&wp.element.createElement(p,null,wp.element.createElement(o.PanelRow,null,wp.element.createElement(o.TextControl,{label:"Map height when the map is sticky and not extended",value:f,onChange:P("standardMapHeight"),help:"Height can be written in pixels (px) or percents of the screen's height (%). i.e: 200px or 50%",className:"input-100"})),wp.element.createElement(o.PanelRow,null,wp.element.createElement(o.TextControl,{label:"Map height when the map is sticky and extended",value:y,onChange:P("extendedMapHeight"),help:"Height can be written in pixels (px) or percents of the screen's height (%). i.e: 200px or 50%",className:"input-100"})),wp.element.createElement(o.PanelRow,null,wp.element.createElement(o.TextControl,{type:"number",label:"Top margin (Space between the top of the screen and the map when it's sticky)",value:v,onChange:P("marginTop"),help:"Height can be written only in pixels (px). You don't need to write the unit. i.e: 20",className:"input-100"})))))),m&&wp.element.createElement("div",null,wp.element.createElement("iframe",{className:"map-iframe traveledmap-reference-iframe",src:m,frameBorder:"0",allow:"fullscreen",style:{height:function(e){return e.replace("%","VH")}(g)}})))},save:function(){return null}})},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var l=function(e,t,n,l){var r=e;return r+=t?"&showPopup=true":"",r+=(n?"":"&hidePictures=true")+(l?"&showPicturesAtStart=true":""),r+=l?"&showPicturesAtStart=true":""}},function(e,t,n){"use strict";var l=n(1),r=(n.n(l),n(0)),a=(n.n(r),n(2)),__=(n.n(a),wp.i18n.__),o=wp.blocks.registerBlockType;wp.element.Fragment;o("traveledmap/embedded-trip-step-block",{title:__("Step scroll anchor"),icon:"location",category:"traveledmap",keywords:[__("Embedded Trip Step"),__("Embed"),__("Step"),__("Trip"),__("City"),__("Place"),__("Scroll"),__("Anchor")],attributes:{tripStepsJson:{type:"string",source:"meta",meta:"traveledmap_trip_steps"},tripSteps:{type:"string"},location:{type:"string"}},edit:function(e){var t=e.attributes,n=t.location,l=t.tripStepsJson,r=t.tripSteps,o=e.setAttributes;if(!r&&l){console.debug({tripStepsJson:l});try{var i=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=["doubleStringify","simpleStringify"];if(t>n.length)return null;var r=n[t];try{switch(r){case"doubleStringify":return JSON.parse(JSON.parse(l));case"simpleStringify":return JSON.parse(l[0])}}catch(n){return console.debug("Method for getting steps from metadata failed:",r,n),e(t+1)}}();console.debug({tripSteps:i}),i?o({tripSteps:i,location:n&&n.length>0?n:Object.keys(i)[0]}):console.warn("Trip steps was not defined",i,l)}catch(e){console.error("An error occurred while setting trip steps in step-block",e)}}return r?wp.element.createElement(a.SelectControl,{label:"Choose the step the map should move on when reader reaches this section of the post",value:n,options:Object.keys(r).map(function(e){return{label:r[e],value:e}}),onChange:function(e){return o({location:e})}}):wp.element.createElement("div",{className:"flex-center"},wp.element.createElement(a.Spinner,null))},save:function(e){var t=e.attributes.location;return wp.element.createElement("span",{className:"traveledmap-trip-step","data-step":t})}})}]);
